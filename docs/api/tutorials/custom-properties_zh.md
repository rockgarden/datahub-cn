# è‡ªå®šä¹‰å±æ€§

## ä¸ºä»€ä¹ˆè¦åœ¨æ•°æ®é›†ä¸Šä½¿ç”¨è‡ªå®šä¹‰å±æ€§ï¼Ÿ

æ•°æ®é›†çš„è‡ªå®šä¹‰å±æ€§æœ‰åŠ©äºæä¾›æ ‡å‡†å…ƒæ•°æ®å­—æ®µä¸­æ— æ³•æä¾›çš„æ•°æ®é™„åŠ ä¿¡æ¯ã€‚è‡ªå®šä¹‰å±æ€§å¯ç”¨äºæè¿°æ•°æ®çš„ç‰¹å®šå±æ€§ï¼Œå¦‚ä½¿ç”¨çš„åº¦é‡å•ä½ã€æ¶µç›–çš„æ—¥æœŸèŒƒå›´æˆ–æ•°æ®æ¶‰åŠçš„åœ°ç†åŒºåŸŸã€‚è¿™åœ¨å¤„ç†å¤§å‹å¤æ‚æ•°æ®é›†æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºé¢å¤–çš„ä¸Šä¸‹æ–‡æœ‰åŠ©äºç¡®ä¿æ­£ç¡®æœ‰æ•ˆåœ°ä½¿ç”¨æ•°æ®ã€‚

DataHub å°†æ•°æ®é›†çš„è‡ªå®šä¹‰å±æ€§å»ºæ¨¡ä¸ºå­—ç¬¦ä¸²çš„é”®å€¼å¯¹æ˜ å°„ã€‚

è‡ªå®šä¹‰å±æ€§è¿˜å¯ç”¨äºå¯ç”¨é«˜çº§æœç´¢å’Œå‘ç°åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®ç‰¹å®šå±æ€§å¯¹æ•°æ®é›†è¿›è¡Œè¿‡æ»¤å’Œæ’åºã€‚è¿™å¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€ŸæŸ¥æ‰¾å’Œè®¿é—®æ‰€éœ€çš„æ•°æ®ï¼Œè€Œæ— éœ€æ‰‹åŠ¨æŸ¥çœ‹å¤§é‡æ•°æ®é›†ã€‚

### æœ¬æŒ‡å—çš„ç›®æ ‡

æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨æ•°æ®é›† `fct_users_deleted` ä¸Šæ·»åŠ ã€åˆ é™¤æˆ–æ›¿æ¢è‡ªå®šä¹‰å±æ€§ã€‚ä»¥ä¸‹æ˜¯æ¯ä¸ªæ“ä½œçš„å«ä¹‰ï¼š

- æ·»åŠ ï¼šåœ¨ä¸å½±å“ç°æœ‰å±æ€§çš„æƒ…å†µä¸‹å‘æ•°æ®é›†æ·»åŠ è‡ªå®šä¹‰å±æ€§
- åˆ é™¤ï¼šä»æ•°æ®é›†ä¸­ç§»é™¤ç‰¹å®šå±æ€§ï¼Œä½†ä¸å½±å“å…¶ä»–å±æ€§
- æ›¿æ¢ ä¾‹å¦‚ï¼Œâ€œDatasetPropertiesâ€ æ–¹é¢åŒ…å« â€œcustomPropertiesâ€ ä»¥åŠå…¶ä»–å­—æ®µï¼Œå¦‚ â€œnameâ€ å’Œ â€œdescriptionâ€ã€‚

## å…ˆå†³æ¡ä»¶

å¯¹äºæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦éƒ¨ç½² DataHub Quickstart å¹¶æ‘„å–ç¤ºä¾‹æ•°æ®ã€‚
è¯¦ç»†ä¿¡æ¯è¯·å‚é˜… [Datahub Quickstart Guide](/docs/quickstart.md)ã€‚

æ³¨æ„
åœ¨æ·»åŠ è‡ªå®šä¹‰å±æ€§ä¹‹å‰ï¼Œæ‚¨éœ€è¦ç¡®ä¿ç›®æ ‡æ•°æ®é›†å·²å­˜åœ¨äºæ‚¨çš„ DataHub å®ä¾‹ä¸­ã€‚
å¦‚æœå°è¯•æ“ä½œä¸å­˜åœ¨çš„å®ä½“ï¼Œæ“ä½œå°†å¤±è´¥ã€‚
åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ ·æœ¬æ‘„å–çš„æ•°æ®ã€‚
:::

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†å‘æ•°æ®é›† `fct_users_deleted` æ·»åŠ ä¸€äº›è‡ªå®šä¹‰å±æ€§ `cluster_name` å’Œ `retention_time`ã€‚

æ‘„å–æ ·æœ¬æ•°æ®åï¼Œæ•°æ®é›† `fct_users_deleted` åº”å…·æœ‰è‡ªå®šä¹‰å±æ€§éƒ¨åˆ†ï¼Œå…¶ä¸­çš„ `encoding` è®¾ç½®ä¸º `utf-8`ã€‚

![dataset-properties-before](https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/apis/tutorials/dataset-properties-before.png)

```shell
datahub get --urn "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_deleted,PROD)" --aspect datasetProperties
{
  "datasetProperties": {
    "customProperties": {
      "encoding": "utf-8"
    },
    "description": "table containing all the users deleted on a single day",
    "tags": []
  }
}
```

## ä»¥ç¼–ç¨‹æ–¹å¼æ·»åŠ è‡ªå®šä¹‰å±æ€§

ä»¥ä¸‹ä»£ç å°†è‡ªå®šä¹‰å±æ€§ `cluster_name` å’Œ `retention_time` æ·»åŠ åˆ°åä¸º `fct_users_deleted` çš„æ•°æ®é›†ä¸­ï¼Œè€Œä¸ä¼šå½±å“ç°æœ‰å±æ€§ã€‚

> ğŸš« ç›®å‰ä¸æ”¯æŒé€šè¿‡ GraphQL åœ¨æ•°æ®é›†ä¸Šæ·»åŠ è‡ªå®šä¹‰å±æ€§ã€‚
> è¯·æŸ¥çœ‹ [APIåŠŸèƒ½å¯¹ç…§è¡¨](/docs/api/datahub-apis.md#datahub-api-comparison) äº†è§£æ›´å¤šä¿¡æ¯

```java
{{ inline /metadata-integration/java/examples/src/main/java/io/datahubproject/examples/DatasetCustomPropertiesAdd.java show_path_as_comment }}
```

```python
{{ inline /metadata-ingestion/examples/library/dataset_add_properties.py show_path_as_comment }}
```

### æ·»åŠ è‡ªå®šä¹‰å±æ€§çš„é¢„æœŸç»“æœ

ç°åœ¨å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–°å±æ€§è¢«æ·»åŠ åˆ° `fct_users_deleted` ä¸­ï¼Œè€Œä¹‹å‰çš„å±æ€§ `encoding` ä¿æŒä¸å˜ã€‚

![dataset-properties-added](https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/apis/tutorials/dataset-properties-added.png)

æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ä½¿ç”¨ `datahub` cli è¿è¡Œæ­¤ä»£ç åï¼Œé€šè¿‡ç¼–ç¨‹æ£€æŸ¥ `datasetProperties` æ–¹é¢æ¥éªŒè¯æ­¤æ“ä½œã€‚

```shell
datahub get --urn "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_deleted,PROD)" --aspect datasetProperties
{
  "datasetProperties": {
    "customProperties": {
      "encoding": "utf-8",
      "cluster_name": "datahubproject.acryl.io",
      "retention_time": "2 years"
    },
    "description": "table containing all the users deleted on a single day",
    "tags": []
  }
}
```

## ä»¥ç¼–ç¨‹æ–¹å¼æ·»åŠ å’Œåˆ é™¤è‡ªå®šä¹‰å±æ€§

ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•åœ¨åŒä¸€è°ƒç”¨ä¸­æ·»åŠ å’Œåˆ é™¤è‡ªå®šä¹‰å±æ€§ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†ä»åä¸º `fct_users_deleted` çš„æ•°æ®é›†ä¸­æ·»åŠ è‡ªå®šä¹‰å±æ€§ `cluster_name` å¹¶ç§»é™¤å±æ€§ `retention_time` ï¼Œè€Œä¸ä¼šå½±å“ç°æœ‰å±æ€§ã€‚

> ç›®å‰ä¸æ”¯æŒé€šè¿‡ GraphQL åœ¨æ•°æ®é›†ä¸Šæ·»åŠ å’Œåˆ é™¤è‡ªå®šä¹‰å±æ€§ã€‚
> è¯·æŸ¥çœ‹ [APIåŠŸèƒ½å¯¹ç…§è¡¨](/docs/api/datahub-apis.md#datahub-api-comparison) äº†è§£æ›´å¤šä¿¡æ¯

```java
{{ inline /metadata-integration/java/examples/src/main/java/io/datahubproject/examples/DatasetCustomPropertiesAddRemove.java show_path_as_comment }}
```

```python
{{ inline /metadata-ingestion/examples/library/dataset_add_remove_properties.py show_path_as_comment }}
```

### å¯¹è‡ªå®šä¹‰å±æ€§è¿›è¡Œæ·»åŠ å’Œåˆ é™¤æ“ä½œçš„é¢„æœŸç»“æœ

ç°åœ¨å¯ä»¥çœ‹åˆ° `cluster_name` å±æ€§å·²æ·»åŠ åˆ° `fct_users_deleted`ï¼Œè€Œ `retention_time` å±æ€§å·²åˆ é™¤ã€‚

![dataset-properties-added-removed](https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/apis/tutorials/dataset-properties-added-removed.png)

We can also verify this operation programmatically by checking the `datasetProperties` aspect using the `datahub` cli.

```shell
datahub get --urn "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_deleted,PROD)" --aspect datasetProperties
{
  "datasetProperties": {
    "customProperties": {
      "encoding": "utf-8",
      "cluster_name": "datahubproject.acryl.io"
    },
    "description": "table containing all the users deleted on a single day",
    "tags": []
  }
}
```

## ä»¥ç¼–ç¨‹æ–¹å¼æ›¿æ¢è‡ªå®šä¹‰å±æ€§

ä¸‹é¢çš„ä»£ç ä¼šç”¨ä¸€ä¸ªæ–°çš„å±æ€§æ˜ å°„æ›¿æ¢å½“å‰çš„è‡ªå®šä¹‰å±æ€§ï¼Œè¯¥æ˜ å°„åªåŒ…å«å±æ€§ `cluster_name` å’Œ `retention_time`ã€‚è¿è¡Œæ­¤ä»£ç åï¼Œå…ˆå‰çš„ `encoding` å±æ€§å°†è¢«åˆ é™¤ã€‚

> ğŸš« ç›®å‰ä¸æ”¯æŒé€šè¿‡ GraphQL åœ¨æ•°æ®é›†ä¸Šæ›¿æ¢è‡ªå®šä¹‰å±æ€§ã€‚
> è¯·æŸ¥çœ‹ [API åŠŸèƒ½å¯¹ç…§è¡¨](/docs/api/datahub-apis.md#datahub-api-comparison) äº†è§£æ›´å¤šä¿¡æ¯

```java
{{ inline /metadata-integration/java/examples/src/main/java/io/datahubproject/examples/DatasetCustomPropertiesReplace.java show_path_as_comment }}
```

```python
{{ inline /metadata-ingestion/examples/library/dataset_replace_properties.py show_path_as_comment }}
```

### æ›¿æ¢è‡ªå®šä¹‰å±æ€§çš„é¢„æœŸç»“æœ

ç°åœ¨å¯ä»¥çœ‹åˆ° `cluster_name` å’Œ `retention_time` å±æ€§å·²æ·»åŠ åˆ° `fct_users_deleted` ä¸­ï¼Œä½†ä¹‹å‰çš„ `encoding` å±æ€§å·²ä¸å¤å­˜åœ¨ã€‚

![dataset-properties-replaced](https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/apis/tutorials/dataset-properties-replaced.png)

æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ `datahub` cli æ£€æŸ¥ `datasetProperties` æ–¹é¢ï¼Œä»¥ç¼–ç¨‹æ–¹å¼éªŒè¯è¿™ä¸€æ“ä½œã€‚

```shell
datahub get --urn "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_deleted,PROD)" --aspect datasetProperties
{
  "datasetProperties": {
    "customProperties": {
      "cluster_name": "datahubproject.acryl.io",
      "retention_time": "2 years"
    },
    "description": "table containing all the users deleted on a single day",
    "tags": []
  }
}
```
